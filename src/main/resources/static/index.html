<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½åƒåœ¾åˆ†ç±»ç³»ç»Ÿ</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .type-card {
            transition: all 0.3s ease;
            border-radius: 15px;
            overflow: hidden;
        }
        .type-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        .recyclable { border-top: 5px solid #1890ff; }
        .kitchen { border-top: 5px solid #52c41a; }
        .hazardous { border-top: 5px solid #f5222d; }
        .other { border-top: 5px solid #8c8c8c; }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .file-upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .file-upload-area:hover {
            border-color: #9f7aea;
            background-color: #faf5ff;
        }
        .file-upload-area.dragover {
            border-color: #9f7aea;
            background-color: #f5f3ff;
            transform: scale(1.02);
        }
    </style>
</head>
<body class="gradient-bg">
    <div class="container mx-auto px-4 py-12">
        <!-- å¤´éƒ¨ -->
        <div class="text-center mb-16">
            <div class="inline-block p-4 rounded-full bg-white/20 mb-6">
                <i class="fas fa-recycle text-6xl text-white"></i>
            </div>
            <h1 class="text-5xl font-bold text-white mb-4">æ ¡å›­æ™ºèƒ½åƒåœ¾åˆ†ç±»ç³»ç»Ÿ</h1>
            <p class="text-xl text-white/80 mb-8">AIæ™ºèƒ½è¯†åˆ« Â· ç»¿è‰²æ ¡å›­ Â· ç§¯åˆ†æ¿€åŠ±</p>
            
            <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <div class="inline-flex items-center px-6 py-3 rounded-full bg-white/20">
                <div class="w-3 h-3 rounded-full bg-green-400 mr-3 animate-pulse"></div>
                <span class="text-white font-semibold">ç³»ç»Ÿè¿è¡Œæ­£å¸¸ Â· å®æ—¶åœ¨çº¿</span>
            </div>
        </div>

        <!-- ä¸»è¦åŠŸèƒ½å¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <!-- è¯†åˆ«åŠŸèƒ½ -->
            <div class="glass-card p-8">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-blue-600 mb-4">
                        <i class="fas fa-camera text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">æ™ºèƒ½è¯†åˆ«</h3>
                    <p class="text-gray-600">æ‹ç…§ä¸Šä¼ ï¼ŒAIæ™ºèƒ½åˆ†ç±»åƒåœ¾</p>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center text-gray-700">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <span>æ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼</span>
                    </div>
                    <div class="flex items-center text-gray-700">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <span>æ¯«ç§’çº§è¯†åˆ«å“åº”</span>
                    </div>
                </div>
            </div>

            <!-- ç§¯åˆ†ç³»ç»Ÿ -->
            <div class="glass-card p-8">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 text-green-600 mb-4">
                        <i class="fas fa-star text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">ç§¯åˆ†æ¿€åŠ±</h3>
                    <p class="text-gray-600">æ­£ç¡®åˆ†ç±»ï¼Œè·å–ç§¯åˆ†å¥–åŠ±</p>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-gray-700">å¯å›æ”¶åƒåœ¾</span>
                        <span class="font-bold text-green-600">+10åˆ†</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-gray-700">å¨ä½™åƒåœ¾</span>
                        <span class="font-bold text-green-600">+5åˆ†</span>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®ç»Ÿè®¡ -->
            <div class="glass-card p-8">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-purple-100 text-purple-600 mb-4">
                        <i class="fas fa-chart-bar text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">æ•°æ®å¯è§†åŒ–</h3>
                    <p class="text-gray-600">å®æ—¶ç»Ÿè®¡ï¼Œæ•°æ®åˆ†æ</p>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center text-gray-700">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <span>ç”¨æˆ·è¡Œä¸ºåˆ†æ</span>
                    </div>
                    <div class="flex items-center text-gray-700">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <span>åƒåœ¾åˆ†ç±»ç»Ÿè®¡</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å›¾ç‰‡è¯†åˆ«æµ‹è¯•åŒºåŸŸï¼ˆæ”¾åœ¨æ›´æ˜¾çœ¼çš„ä½ç½®ï¼‰ -->
        <div class="glass-card p-8 mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                <i class="fas fa-camera-retro mr-4 text-purple-600"></i>
                å›¾ç‰‡è¯†åˆ«æµ‹è¯•
            </h2>
            
            <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
            <div id="uploadArea" class="file-upload-area p-12 text-center mb-8">
                <div class="mb-6">
                    <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                    <h3 class="text-2xl font-bold text-gray-700 mb-2">ä¸Šä¼ å›¾ç‰‡è¿›è¡Œåƒåœ¾åˆ†ç±»è¯†åˆ«</h3>
                    <p class="text-gray-600 mb-4">å°†å›¾ç‰‡æ‹–æ”¾åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                </div>
                
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-6">
                    <input type="file" id="imageUpload" accept="image/*" class="hidden">
                    <label for="imageUpload" id="uploadButton" class="cursor-pointer inline-flex items-center px-8 py-4 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg hover:shadow-xl">
                        <i class="fas fa-folder-open mr-3 text-lg"></i>
                        é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
                    </label>
                    <div class="text-sm text-gray-500">
                        <p><i class="fas fa-info-circle mr-2"></i>æ”¯æŒ JPGã€PNG æ ¼å¼</p>
                        <p><i class="fas fa-sd-card mr-2"></i>æœ€å¤§ 10MB</p>
                    </div>
                </div>
                
                <!-- æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º -->
                <div id="fileInfo" class="hidden mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="fas fa-file-image text-blue-500 text-xl mr-3"></i>
                            <div>
                                <p id="fileName" class="font-medium text-blue-800"></p>
                                <p id="fileSize" class="text-sm text-blue-600"></p>
                            </div>
                        </div>
                        <button onclick="clearFile()" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- è¯†åˆ«ç»“æœåŒºåŸŸ -->
            <div id="recognitionResult" class="hidden">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-search mr-3 text-blue-600"></i>
                    è¯†åˆ«ç»“æœ
                </h3>
                <div id="resultContent">
                    <!-- ç»“æœå°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                </div>
            </div>
            
            <!-- APIæµ‹è¯•æŒ‰é’® -->
            <div class="mt-8 pt-8 border-t border-gray-200">
                <h4 class="text-lg font-bold text-gray-700 mb-4">APIæ¥å£æµ‹è¯•</h4>
                <div class="flex flex-wrap gap-4">
                    <button onclick="testCategories()" class="flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        <i class="fas fa-database mr-2"></i>
                        æµ‹è¯•åˆ†ç±»API
                    </button>
                    <button onclick="checkServiceStatus()" class="flex items-center px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                        <i class="fas fa-server mr-2"></i>
                        æœåŠ¡çŠ¶æ€
                    </button>
                </div>
                <div id="apiTestResult" class="mt-4"></div>
            </div>
        </div>

        <!-- åƒåœ¾ç±»å‹å±•ç¤º -->
        <div class="mb-16">
            <h2 class="text-3xl font-bold text-white mb-8 text-center">å››å¤§åƒåœ¾åˆ†ç±»</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="type-card recyclable glass-card p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                            <i class="fas fa-recycle text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">å¯å›æ”¶åƒåœ¾</h3>
                            <p class="text-blue-600 font-semibold">+10ç§¯åˆ†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">å¡‘æ–™ã€çº¸å¼ ã€ç»ç’ƒã€é‡‘å±ç­‰å¯å†åˆ©ç”¨ç‰©å“</p>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-trash-alt mr-2"></i>è“è‰²åƒåœ¾æ¡¶
                    </div>
                </div>

                <div class="type-card kitchen glass-card p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mr-4">
                            <i class="fas fa-apple-alt text-green-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">å¨ä½™åƒåœ¾</h3>
                            <p class="text-green-600 font-semibold">+5ç§¯åˆ†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">å‰©èœå‰©é¥­ã€æœçš®æœæ ¸ã€èŒ¶å¶æ¸£ç­‰æ˜“è…åƒåœ¾</p>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-trash-alt mr-2"></i>ç»¿è‰²åƒåœ¾æ¡¶
                    </div>
                </div>

                <div class="type-card hazardous glass-card p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mr-4">
                            <i class="fas fa-radiation text-red-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">æœ‰å®³åƒåœ¾</h3>
                            <p class="text-red-600 font-semibold">+15ç§¯åˆ†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">ç”µæ± ã€è¯å“ã€ç¯ç®¡ã€æ²¹æ¼†ç­‰æœ‰å®³ç‰©è´¨</p>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-trash-alt mr-2"></i>çº¢è‰²åƒåœ¾æ¡¶
                    </div>
                </div>

                <div class="type-card other glass-card p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mr-4">
                            <i class="fas fa-ban text-gray-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">å…¶ä»–åƒåœ¾</h3>
                            <p class="text-gray-600 font-semibold">+0ç§¯åˆ†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4">å«ç”Ÿçº¸ã€é™¶ç“·ç¢ç‰‡ã€æ±¡æŸ“çº¸å¼ ç­‰</p>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-trash-alt mr-2"></i>ç°è‰²åƒåœ¾æ¡¶
                    </div>
                </div>
            </div>
        </div>

        <!-- ç³»ç»Ÿä¿¡æ¯ -->
        <div class="glass-card p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">ç³»ç»Ÿä¿¡æ¯</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="text-center p-4">
                    <div class="text-3xl font-bold text-blue-600 mb-2">Spring Boot</div>
                    <div class="text-gray-600">åç«¯æ¡†æ¶</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-3xl font-bold text-green-600 mb-2">MySQL</div>
                    <div class="text-gray-600">æ•°æ®åº“</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-3xl font-bold text-purple-600 mb-2">Hibernate</div>
                    <div class="text-gray-600">ORMæ¡†æ¶</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-3xl font-bold text-red-600 mb-2">AIè¯†åˆ«</div>
                    <div class="text-gray-600">å›¾åƒè¯†åˆ«</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å½“å‰é€‰ä¸­çš„æ–‡ä»¶
        let currentFile = null;
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            initDragAndDrop();
        };
        
        // åˆå§‹åŒ–æ‹–æ‹½åŠŸèƒ½
        function initDragAndDrop() {
            const uploadArea = document.getElementById('uploadArea');
            
            // æ‹–æ‹½äº‹ä»¶
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            // é«˜äº®æ‹–æ‹½åŒºåŸŸ
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => {
                    uploadArea.classList.add('dragover');
                }, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => {
                    uploadArea.classList.remove('dragover');
                }, false);
            });
            
            // å¤„ç†æ–‡ä»¶æ”¾ä¸‹
            uploadArea.addEventListener('drop', handleDrop, false);
        }
        
        // å¤„ç†æ‹–æ‹½æ”¾ä¸‹æ–‡ä»¶
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const file = dt.files[0];
            
            if (file && file.type.startsWith('image/')) {
                setSelectedFile(file);
            } else {
                showError('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆJPG/PNGæ ¼å¼ï¼‰');
            }
        }
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶å¤„ç†
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                setSelectedFile(file);
            }
        });
        
        // è®¾ç½®é€‰ä¸­çš„æ–‡ä»¶
        function setSelectedFile(file) {
            currentFile = file;
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            
            fileName.textContent = file.name;
            fileSize.textContent = `å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB`;
            fileInfo.classList.remove('hidden');
            
            // è‡ªåŠ¨å¼€å§‹è¯†åˆ«
            startRecognition();
        }
        
        // æ¸…é™¤æ–‡ä»¶
        function clearFile() {
            currentFile = null;
            document.getElementById('imageUpload').value = '';
            document.getElementById('fileInfo').classList.add('hidden');
            document.getElementById('recognitionResult').classList.add('hidden');
        }
        
        // å¼€å§‹è¯†åˆ«
        function startRecognition() {
            if (!currentFile) {
                showError('è¯·å…ˆé€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
                return;
            }
            
            // éªŒè¯æ–‡ä»¶ç±»å‹
            if (!currentFile.type.startsWith('image/')) {
                showError('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆJPG/PNGæ ¼å¼ï¼‰');
                return;
            }
            
            // æ˜¾ç¤ºè¯†åˆ«ç»“æœåŒºåŸŸ
            const resultArea = document.getElementById('recognitionResult');
            const resultContent = document.getElementById('resultContent');
            
            resultArea.classList.remove('hidden');
            resultContent.innerHTML = `
                <div class="flex flex-col items-center justify-center p-12 bg-gray-50 rounded-xl">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-purple-600 mb-6"></div>
                    <p class="text-xl font-medium text-gray-700 mb-2">ğŸ” æ­£åœ¨è¯†åˆ«ä¸­</p>
                    <p class="text-gray-500">è¯·ç¨å€™ï¼ŒAIæ­£åœ¨åˆ†æå›¾ç‰‡...</p>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-6">
                        <div id="progressBar" class="bg-purple-600 h-2 rounded-full transition-all duration-300" style="width: 30%"></div>
                    </div>
                </div>
            `;
            
            // æ¨¡æ‹Ÿè¿›åº¦æ¡
            let progress = 30;
            const progressInterval = setInterval(() => {
                progress += 10;
                if (progress >= 90) clearInterval(progressInterval);
                document.getElementById('progressBar').style.width = progress + '%';
            }, 300);
            
            // å‡†å¤‡FormData
            const formData = new FormData();
            formData.append('file', currentFile);
            
            // å‘é€è¯·æ±‚
            fetch('/api/garbage/recognize', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                clearInterval(progressInterval);
                document.getElementById('progressBar').style.width = '100%';
                
                if (!response.ok) {
                    return response.text().then(text => {
                        throw new Error(`HTTP ${response.status}: ${text}`);
                    });
                }
                return response.json();
            })
            .then(data => {
                setTimeout(() => {
                    displayRecognitionResult(data);
                }, 500);
            })
            .catch(error => {
                console.error('è¯†åˆ«å¤±è´¥:', error);
                showError('è¯†åˆ«å¤±è´¥: ' + error.message);
            });
        }
        
        // æ˜¾ç¤ºè¯†åˆ«ç»“æœ
        function displayRecognitionResult(data) {
            const resultContent = document.getElementById('resultContent');
            
            if (!data.items || data.items.length === 0) {
                resultContent.innerHTML = `
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-8 rounded-xl">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-search text-yellow-500 text-3xl mr-4"></i>
                            <div>
                                <h3 class="text-xl font-bold text-yellow-800">æœªè¯†åˆ«åˆ°ç‰©å“</h3>
                                <p class="text-yellow-600">è¯·å°è¯•ä¸Šä¼ æ›´æ¸…æ™°çš„å›¾ç‰‡</p>
                            </div>
                        </div>
                        <p class="text-yellow-700">${data.suggestion || 'å¯èƒ½æ˜¯å›¾ç‰‡ä¸æ¸…æ™°æˆ–ç‰©å“ä¸åœ¨è¯†åˆ«èŒƒå›´å†…'}</p>
                    </div>
                `;
                return;
            }
            
            // è·å–ä¸»è¦è¯†åˆ«ç»“æœ
            const mainItem = data.items[0];
            const category = mainItem.category || 'æœªçŸ¥';
            const confidence = (mainItem.score * 100).toFixed(1);
            const points = data.points || 0;
            
            // æ ¹æ®åˆ†ç±»è®¾ç½®é¢œè‰²å’Œåƒåœ¾æ¡¶é¢œè‰²
            let categoryColor, categoryIcon, trashColor, trashEmoji;
            
            switch(category) {
                case 'å¯å›æ”¶ç‰©':
                    categoryColor = 'blue';
                    categoryIcon = 'â™»ï¸';
                    trashColor = 'è“è‰²';
                    trashEmoji = 'ğŸ—‘ï¸ğŸ”µ';
                    break;
                case 'å¨ä½™åƒåœ¾':
                    categoryColor = 'green';
                    categoryIcon = 'ğŸ';
                    trashColor = 'ç»¿è‰²';
                    trashEmoji = 'ğŸ—‘ï¸ğŸŸ¢';
                    break;
                case 'æœ‰å®³åƒåœ¾':
                    categoryColor = 'red';
                    categoryIcon = 'âš ï¸';
                    trashColor = 'çº¢è‰²';
                    trashEmoji = 'ğŸ—‘ï¸ğŸ”´';
                    break;
                case 'å…¶ä»–åƒåœ¾':
                    categoryColor = 'gray';
                    categoryIcon = 'ğŸ—‘ï¸';
                    trashColor = 'ç°è‰²';
                    trashEmoji = 'ğŸ—‘ï¸âš«';
                    break;
                default:
                    categoryColor = 'gray';
                    categoryIcon = 'â“';
                    trashColor = 'ç°è‰²';
                    trashEmoji = 'ğŸ—‘ï¸âš«';
            }
            
            // æ„å»ºç»“æœHTML
            let html = `
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
                    <div class="bg-gradient-to-r from-${categoryColor}-500 to-${categoryColor}-600 p-8 text-white">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="text-5xl mr-6">${categoryIcon}</div>
                                <div>
                                    <h3 class="text-3xl font-bold">è¯†åˆ«æˆåŠŸ</h3>
                                    <p class="opacity-90 mt-1">å·²æˆåŠŸè¯†åˆ«å›¾ç‰‡å†…å®¹</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold">ç½®ä¿¡åº¦</div>
                                <div class="text-3xl font-bold">${confidence}%</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸»è¦å†…å®¹ -->
                    <div class="p-8">
                        <!-- è¯†åˆ«ç»“æœå¡ç‰‡ -->
                        <div class="mb-8">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-box mr-3 text-${categoryColor}-600"></i>
                                ä¸»è¦è¯†åˆ«ç‰©å“
                            </h4>
                            <div class="bg-gradient-to-r from-${categoryColor}-50 to-${categoryColor}-100 p-6 rounded-xl border-l-4 border-${categoryColor}-400">
                                <div class="flex items-center">
                                    <div class="text-4xl mr-5">${categoryIcon}</div>
                                    <div class="flex-1">
                                        <p class="font-bold text-2xl text-${categoryColor}-800">${mainItem.name}</p>
                                        <p class="text-${categoryColor}-600 mt-1">AIè¯†åˆ«ç»“æœ</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm text-gray-500">ç½®ä¿¡åº¦</div>
                                        <div class="text-2xl font-bold text-${categoryColor}-700">${confidence}%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- åˆ†ç±»ç»“æœç½‘æ ¼ -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-gray-50 p-6 rounded-xl text-center">
                                <div class="text-3xl mb-3">ğŸ·ï¸</div>
                                <div class="text-sm text-gray-500 mb-2">åƒåœ¾åˆ†ç±»</div>
                                <div class="text-2xl font-bold text-${categoryColor}-600">${category}</div>
                            </div>
                            
                            <div class="bg-gray-50 p-6 rounded-xl text-center">
                                <div class="text-3xl mb-3">${trashEmoji}</div>
                                <div class="text-sm text-gray-500 mb-2">æŠ•æ”¾åƒåœ¾æ¡¶</div>
                                <div class="text-2xl font-bold text-${categoryColor}-600">${trashColor}åƒåœ¾æ¡¶</div>
                            </div>
                            
                            ${points > 0 ? `
                            <div class="bg-yellow-50 p-6 rounded-xl text-center border-l-4 border-yellow-400">
                                <div class="text-3xl mb-3">ğŸ†</div>
                                <div class="text-sm text-gray-500 mb-2">ç§¯åˆ†å¥–åŠ±</div>
                                <div class="text-2xl font-bold text-yellow-600">+${points} ç§¯åˆ†</div>
                            </div>
                            ` : `
                            <div class="bg-gray-50 p-6 rounded-xl text-center">
                                <div class="text-3xl mb-3">ğŸ“Š</div>
                                <div class="text-sm text-gray-500 mb-2">æ€»ä½“ç½®ä¿¡åº¦</div>
                                <div class="text-2xl font-bold text-gray-600">${(data.confidence * 100).toFixed(1)}%</div>
                            </div>
                            `}
                        </div>
                        
                        <!-- å¤„ç†æ–¹æ³• -->
                        <div class="mb-8">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-hand-paper mr-3 text-${categoryColor}-600"></i>
                                å¤„ç†æ–¹æ³•
                            </h4>
                            <div class="bg-gray-50 p-6 rounded-xl">
                                <p class="text-lg text-gray-700">${mainItem.disposalMethod || 'è¯·æŒ‰ç…§åƒåœ¾åˆ†ç±»æ ‡å‡†è¿›è¡Œå¤„ç†'}</p>
                            </div>
                        </div>
                        
                        <!-- æœ€ç»ˆå»ºè®® -->
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-6 rounded-xl">
                            <div class="flex items-start">
                                <i class="fas fa-lightbulb text-blue-500 text-2xl mr-4 mt-1"></i>
                                <div>
                                    <p class="font-bold text-blue-800 text-lg mb-2">ğŸ’¡ æŠ•æ”¾å»ºè®®</p>
                                    <p class="text-blue-700 text-lg">
                                        <span class="font-bold">${mainItem.name}</span> 
                                        å±äº <span class="font-bold text-${categoryColor}-600">${category}</span>ï¼Œ
                                        è¯·æŠ•å…¥ <span class="font-bold text-${categoryColor}-600">${trashColor}åƒåœ¾æ¡¶</span>
                                        ${points > 0 ? `ï¼Œå¯è·å¾— <span class="font-bold text-yellow-600">${points}ç§¯åˆ†</span> å¥–åŠ±ï¼` : ''}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            resultContent.innerHTML = html;
        }
        
        // APIæµ‹è¯•å‡½æ•°
        async function testCategories() {
            const apiTestResult = document.getElementById('apiTestResult');
            apiTestResult.innerHTML = `
                <div class="flex items-center p-4 bg-blue-50 rounded-lg">
                    <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"></div>
                    <span>æ­£åœ¨æµ‹è¯•åˆ†ç±»API...</span>
                </div>
            `;
            
            try {
                const response = await fetch('/api/categories');
                const data = await response.json();
                
                apiTestResult.innerHTML = `
                    <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-3 text-xl"></i>
                            <div>
                                <p class="font-bold text-green-800">âœ… åˆ†ç±»APIæµ‹è¯•æˆåŠŸ</p>
                                <p class="text-green-600">çŠ¶æ€ç : ${response.status}ï¼Œæ•°æ®æ¡æ•°: ${data.data?.length || 0}</p>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                apiTestResult.innerHTML = `
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-times-circle text-red-500 mr-3 text-xl"></i>
                            <div>
                                <p class="font-bold text-red-800">âŒ åˆ†ç±»APIæµ‹è¯•å¤±è´¥</p>
                                <p class="text-red-600">${error.message}</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        // æ£€æŸ¥æœåŠ¡çŠ¶æ€
        async function checkServiceStatus() {
            const apiTestResult = document.getElementById('apiTestResult');
            apiTestResult.innerHTML = `
                <div class="flex items-center p-4 bg-blue-50 rounded-lg">
                    <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"></div>
                    <span>æ­£åœ¨æ£€æŸ¥æœåŠ¡çŠ¶æ€...</span>
                </div>
            `;
            
            try {
                const response = await fetch('/api/categories');
                if (response.ok) {
                    apiTestResult.innerHTML = `
                        <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-server text-green-500 mr-3 text-xl"></i>
                                <div>
                                    <p class="font-bold text-green-800">âœ… æœåŠ¡è¿è¡Œæ­£å¸¸</p>
                                    <p class="text-green-600">åç«¯æœåŠ¡å·²æˆåŠŸè¿æ¥å¹¶å“åº”</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                apiTestResult.innerHTML = `
                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-server text-red-500 mr-3 text-xl"></i>
                            <div>
                                <p class="font-bold text-red-800">âŒ æœåŠ¡è¿æ¥å¤±è´¥</p>
                                <p class="text-red-600">æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const resultContent = document.getElementById('resultContent');
            resultContent.innerHTML = `
                <div class="bg-red-50 border-l-4 border-red-500 p-8 rounded-xl">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-exclamation-triangle text-red-500 text-3xl mr-4"></i>
                        <div>
                            <h3 class="text-xl font-bold text-red-800">è¯†åˆ«é”™è¯¯</h3>
                            <p class="text-red-600">${message}</p>
                        </div>
                    </div>
                    <button onclick="startRecognition()" class="mt-4 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                        <i class="fas fa-redo mr-2"></i>
                        é‡è¯•è¯†åˆ«
                    </button>
                </div>
            `;
            
            document.getElementById('recognitionResult').classList.remove('hidden');
        }
    </script>
</body>
</html>